# 演示脚本 03: 自动撮合与分布式结算 (实时清算流程)

## 场景目标
演示成交瞬间，后端清算引擎的自动化流程：
1. **价格重叠撮合**：展示买卖双方报价交汇时的毫秒级成交。
2. **保证金实时扣付**：展示资产端如何从“预估”瞬时转为“实际结算”。
3. **存证级电子仓单**：展示成交后具有法律效力的电子凭证生成。

## 角色分配
*   **角色 A**: 海汽大宗 (买方)
*   **角色 B**: 沙钢贸易 (卖方)

## 演示准备
1. 卖方先挂出一笔螺纹钢 `3850` 吨价，数量 `100`。

## 演示流程

### 步骤 1: 触发价格重叠撮合
1.  **操作**: 买方进入报价面板。
2.  **动作**: 
    *   设置价格为 `3850` (恰好匹配卖方)。
    *   输入数量 `50`。
    *   注意点击前的“保证金预估”显示。
3.  **执行**: 点击 `发布买入报价`。
4.  **结果**: 屏幕右侧立即弹出成交提示，中间行情区的卖单数量减半（100 -> 50）。

### 步骤 2: 查看资产变动与清算结果
1.  **操作**: 点击 `我的资产`。
2.  **视觉重点**: 
    *   **结算历史**: 第一行出现刚才的成交记录，撮合方式为“系统自动”。
    *   **清算状态**: 明确显示为“已清算”。
3.  **亮点展示**: 点击结算记录右侧的 `查看仓单`。
4.  **解说**: *“看！撮合完成的瞬间，分布式清算引擎已经不仅完成了资金的平衡划拨，更是瞬时生成了带有清算所电子签章的‘电子仓单’。该证明书包含了唯一 HASH 码，是资产交付的权威凭证。”*

## 测试验证点
- [ ] 价格相交时，是否产生毫秒级的成交反馈？
- [ ] 行情版块：卖方的剩余挂单数量是否实时扣减？
- [ ] 电子仓单：生成的仓单是否包含：唯一 HASH、签署日期及清算专用章？
- [ ] 结算明细：结算历史中是否准确记录了成交价格和时间？
